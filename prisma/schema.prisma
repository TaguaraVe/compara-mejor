generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Market {
  id        String    @id @default(uuid()) @db.VarChar(40)
  name      String    @db.VarChar(25)
  createdAt DateTime  @default(now())
  products  Product[]
}

model Product {
  id          String        @id @default(uuid()) @db.VarChar(20)
  marketId    String        @db.VarChar(20)
  codWeb      String        @db.VarChar(200)
  productName String        @db.VarChar(120)
  codCM       String        @unique @db.VarChar(15)
  Consolidado Consolidado[]
  prices      Price[]
  market      Market        @relation(fields: [marketId], references: [id])

  @@index([marketId], map: "Product_marketId_fkey")
}

model Consolidado {
  id       String  @id @default(uuid()) @db.VarChar(20)
  category String  @db.VarChar(50)
  codCM    String  @db.VarChar(15)
  nameCM   String  @db.VarChar(120)
  product  Product @relation(fields: [codCM], references: [codCM])

  @@index([codCM], map: "Consolidado_codCM_fkey")
}

model Price {
  id        String   @id @default(uuid())
  productId String
  date      DateTime
  price     Decimal  @db.Decimal(11, 4)
  product   Product  @relation(fields: [productId], references: [id])

  @@index([productId], map: "Price_productId_fkey")
}
